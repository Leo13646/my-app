<!DOCTYPE html>
<html lang="zh">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Decision Engine Pro</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",sans-serif;
background:linear-gradient(180deg,#050505,#0f0f0f 40%,#070707);
color:#e5e7eb;
min-height:100vh;
display:flex;
flex-direction:column;
align-items:center;
padding:90px 20px;
}

.lang{
position:absolute;
top:28px;
right:40px;
font-size:13px;
color:#888;
cursor:pointer;
}

.hero{
text-align:center;
max-width:900px;
margin-bottom:55px;
}

.badge{
display:inline-block;
padding:6px 16px;
border-radius:999px;
font-size:11px;
letter-spacing:1px;
background:#111;
border:1px solid #222;
color:#aaa;
margin-bottom:20px;
}

.hero h1{
font-size:64px;
font-weight:700;
line-height:1.05;
background:linear-gradient(90deg,#ffffff,#d4d4d4,#888);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
}

.hero p{
margin-top:14px;
color:#8a8a8a;
font-size:15px;
}

.card{
background:#0c0c0c;
border:1px solid #1f1f1f;
padding:32px;
border-radius:22px;
width:100%;
max-width:650px;
box-shadow:0 40px 120px rgba(0,0,0,.9);
}

.card-header{
display:flex;
align-items:center;
gap:12px;
margin-bottom:24px;
font-weight:600;
font-size:18px;
}

.icon{
width:38px;
height:38px;
background:#151515;
border:1px solid #222;
border-radius:10px;
display:flex;
align-items:center;
justify-content:center;
}

.label{
font-size:12px;
color:#777;
margin-bottom:6px;
}

input{
width:100%;
padding:12px;
border-radius:12px;
border:1px solid #222;
background:#111;
color:#fff;
margin-bottom:14px;
font-size:14px;
}

input:focus{
outline:none;
border:1px solid #444;
}

.result{
display:flex;
justify-content:space-between;
padding:8px 0;
font-size:13px;
border-bottom:1px solid #1a1a1a;
}

.value{
font-weight:600;
}

.green{color:#22c55e;}
.red{color:#ef4444;}
.yellow{color:#facc15;}
.gray{color:#9ca3af;}

button{
margin-top:20px;
width:100%;
padding:14px;
border-radius:12px;
border:none;
background:#fff;
color:#000;
font-weight:600;
cursor:pointer;
}

.chart-container{
margin-top:30px;
}

canvas{
background:#111;
border-radius:12px;
}
</style>
</head>

<body>

<div class="lang" onclick="toggleLang()">ä¸­æ–‡ / English</div>

<div class="hero">
<div class="badge">Advanced Expected Value Engine</div>
<h1 id="title">Make calculated decisions.</h1>
<p id="subtitle">Evaluate long-term outcomes before risking capital.</p>
</div>

<div class="card">

<div class="card-header">
<div class="icon">ðŸ“Š</div>
<span id="cardTitle">Expected Value Calculator</span>
</div>

<div class="label">Probability (0~1)</div>
<input type="number" id="p" step="0.01">

<div class="label">Reward</div>
<input type="number" id="r">

<div class="label">Cost</div>
<input type="number" id="c">

<div class="result"><span>Expected Value</span><span class="value gray" id="ev">-</span></div>
<div class="result"><span>ROI</span><span class="value gray" id="roi">-</span></div>
<div class="result"><span>Kelly %</span><span class="value gray" id="kelly">-</span></div>
<div class="result"><span>Risk Level</span><span class="value gray" id="risk">-</span></div>

<button onclick="simulate()">Simulate 100 Runs</button>

<div class="chart-container">
<canvas id="capitalChart"></canvas>
</div>

</div>

<script>
let chart;

document.querySelectorAll("input").forEach(i=>i.addEventListener("input",calculate));

function calculate(){
let p=parseFloat(p.value);
let r=parseFloat(r.value);
let c=parseFloat(c.value);
if(isNaN(p)||isNaN(r)||isNaN(c)) return;

let ev=p*r-c;
let roi=(ev/c)*100;
let b=(r-c)/c;
let k=(p*(b+1)-1)/b*100;

update("ev",ev);
update("roi",roi.toFixed(2)+"%");
update("kelly",k.toFixed(2)+"%");

if(ev>0) updateText("risk","Low Risk","green");
else updateText("risk","High Risk","red");
}

function simulate(){
let p=parseFloat(p.value);
let r=parseFloat(r.value);
let c=parseFloat(c.value);
if(isNaN(p)||isNaN(r)||isNaN(c)) return;

let capital=0;
let data=[0];

for(let i=0;i<100;i++){
if(Math.random()<p) capital+=r-c;
else capital-=c;
data.push(capital);
}

if(chart) chart.destroy();

chart=new Chart(document.getElementById("capitalChart"),{
type:'line',
data:{
labels:data.map((_,i)=>i),
datasets:[{
data:data,
borderColor:'#22c55e',
borderWidth:2,
tension:0.3
}]
},
options:{
plugins:{legend:{display:false}},
scales:{
x:{display:false},
y:{grid:{color:"#222"}}
}
}
});
}

function update(id,val){
let el=document.getElementById(id);
el.innerText=val;
if(typeof val==="number"){
if(val>0) el.className="value green";
else el.className="value red";
}
}

function updateText(id,text,color){
let el=document.getElementById(id);
el.innerText=text;
el.className="value "+color;
}
</script>

</body>
</html>
